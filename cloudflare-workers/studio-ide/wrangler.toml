name = "elevate-studio-ide"
main = "src/index.ts"
compatibility_date = "2024-12-02"
account_id = "ff0d5ca582b5911a626ba012935cf3ec"

# Durable Objects for persistent terminal sessions
[durable_objects]
bindings = [
  { name = "WORKSPACE", class_name = "WorkspaceDurableObject" },
  { name = "TERMINAL", class_name = "TerminalDurableObject" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["WorkspaceDurableObject", "TerminalDurableObject"]

# R2 for file storage - using existing R2 endpoint
[[r2_buckets]]
binding = "STUDIO_FILES"
bucket_name = "elevate-studio-files"

# KV for metadata and caching
[[kv_namespaces]]
binding = "STUDIO_META"
id = "8ad42c109be94511841be594379bb76b"

# D1 for structured data
[[d1_databases]]
binding = "STUDIO_DB"
database_name = "elevate-studio"
database_id = "fac72870-5278-4f31-9427-6147c783ef1d"

# Routes
routes = [
  { pattern = "studio-api.elevateforhumanity.org/*", zone_name = "elevateforhumanity.org" }
]

[vars]
ENVIRONMENT = "production"
MAX_FILE_SIZE = "10485760"
MAX_WORKSPACE_SIZE = "104857600"
R2_ENDPOINT = "https://ff0d5ca582b5911a626ba012935cf3ec.r2.cloudflarestorage.com"

# Dev settings
[dev]
port = 8787
local_protocol = "http"
